# GitHub Release å‘å¸ƒæŒ‡å—

## æ–¹æ³• 1ï¼šä½¿ç”¨è‡ªåŠ¨å‘å¸ƒè„šæœ¬ï¼ˆæ¨èï¼‰

### å‰ææ¡ä»¶

1. **å®‰è£… GitHub CLI**
   - è®¿é—®ï¼šhttps://cli.github.com/
   - ä¸‹è½½å¹¶å®‰è£… Windows ç‰ˆæœ¬
   - æˆ–ä½¿ç”¨å‘½ä»¤å®‰è£…ï¼š`winget install --id GitHub.cli`

2. **ç™»å½• GitHub**
   ```bash
   gh auth login
   ```
   - é€‰æ‹© `GitHub.com`
   - é€‰æ‹© `HTTPS`
   - è¾“å…¥ `Y` è¿›è¡Œè®¤è¯
   - é€‰æ‹© `Login with a web browser`
   - å¤åˆ¶æ˜¾ç¤ºçš„ä»£ç 
   - åœ¨æµè§ˆå™¨ä¸­ç²˜è´´å¹¶æˆæƒ

### ä½¿ç”¨æ­¥éª¤

1. **ç¡®ä¿å·²æ„å»ºæœ€æ–°ç‰ˆæœ¬**
   ```bash
   npm run build
   npm run electron-pack
   ```

2. **åŒå‡»è¿è¡Œå‘å¸ƒè„šæœ¬**
   ```
   publish-release.bat
   ```

3. **ç­‰å¾…å‘å¸ƒå®Œæˆ**
   - è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ç¯å¢ƒ
   - åˆ›å»º Release
   - ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶
   - æ˜¾ç¤º Release é“¾æ¥

4. **éªŒè¯å‘å¸ƒ**
   - è®¿é—®æ˜¾ç¤ºçš„é“¾æ¥
   - ç¡®è®¤æ–‡ä»¶å·²ä¸Šä¼ 
   - æ£€æŸ¥ Release è¯´æ˜æ˜¯å¦æ­£ç¡®

---

## æ–¹æ³• 2ï¼šæ‰‹åŠ¨å‘å¸ƒ

### æ­¥éª¤ 1ï¼šåˆ›å»º Release

1. è®¿é—®ï¼šhttps://github.com/yliangchen686-sys/warehouse-accounting/releases/new

2. **å¡«å†™ä¿¡æ¯**ï¼š
   - Tag version: `v1.0.2`
   - Release title: `v1.0.2 - ä¿®å¤ Supabase åŒæ­¥é—®é¢˜`
   - Target: `main`

3. **å¡«å†™æè¿°**ï¼ˆå¤åˆ¶ä¸‹é¢çš„å†…å®¹ï¼‰ï¼š

```markdown
## ğŸ› é‡è¦ä¿®å¤

- ä¿®å¤æ— æ³•åŒæ­¥æ•°æ®åˆ° Supabase çš„ä¸¥é‡é—®é¢˜
- è‡ªåŠ¨æ¸…é™¤æ—§çš„ localStorage æ•°æ®
- æ·»åŠ ç¼ºå¤±çš„ product_name æ•°æ®åº“å­—æ®µ

## âš ï¸ é‡è¦è¯´æ˜

**å®‰è£…å‰å¿…é¡»å…ˆåœ¨ Supabase æ‰§è¡Œ SQL è„šæœ¬ï¼**

1. ç™»å½• Supabase æ§åˆ¶å°
2. SQL Editor â†’ New query
3. ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹è„šæœ¬ï¼ˆåœ¨ä»“åº“æ ¹ç›®å½•ï¼‰ï¼š
   - `simple-fix.sql`
   - `add-product-name-column.sql`
   - `fix-all-tables.sql`

## ğŸ“¦ å®‰è£…è¯´æ˜

1. å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¦‚æœæœ‰ï¼‰
2. ä¸‹è½½ `ä»“å‚¨è®°è´¦ç³»ç»Ÿ Setup 1.0.2.exe`
3. è¿è¡Œå®‰è£…ç¨‹åº
4. é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨æ¸…é™¤æ—§æ•°æ®
5. æ‰€æœ‰æ•°æ®ä¼šä» Supabase åŒæ­¥

## âœ¨ æ–°åŠŸèƒ½

- âœ… æ•°æ®å¯é åŒæ­¥åˆ° Supabase
- âœ… åˆ é™¤åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… è‡ªåŠ¨æ¸…é™¤æ—§çš„æœ¬åœ°ç¼“å­˜æ•°æ®
- âœ… å¤šç«¯æ•°æ®å®æ—¶åŒæ­¥

## ğŸ“ SQL è„šæœ¬è¯´æ˜

### simple-fix.sql
- ä¿®å¤è§’è‰²çº¦æŸï¼ˆæ”¯æŒ merchant, employee, admin, managerï¼‰
- ä¸ºæ ¸å¿ƒè¡¨åˆ›å»º RLS ç­–ç•¥
- ç¡®ä¿ admin è´¦æˆ·çŠ¶æ€æ­£å¸¸

### add-product-name-column.sql
- ä¸º transactions è¡¨æ·»åŠ  product_name åˆ—
- éªŒè¯è¡¨ç»“æ„

### fix-all-tables.sql
- ä¸ºæ‰€æœ‰è¡¨åˆ›å»ºç»Ÿä¸€çš„ RLS ç­–ç•¥
- ç¡®ä¿æ‰€æœ‰æ“ä½œéƒ½è¢«å…è®¸

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### é—®é¢˜æ ¹æº
1. RLS ç­–ç•¥ä½¿ç”¨ `auth.jwt()` éªŒè¯ï¼Œä½†åº”ç”¨ä½¿ç”¨ localStorage è®¤è¯
2. `transactions` è¡¨ç¼ºå°‘ `product_name` åˆ—å¯¼è‡´æ’å…¥å¤±è´¥ï¼ˆ400 é”™è¯¯ï¼‰
3. æ—§çš„ localStorage æ•°æ®å¹²æ‰°æ–°æ•°æ®æ˜¾ç¤ºå’Œåˆ é™¤

### ä¿®å¤æ–¹æ¡ˆ
1. å°†æ‰€æœ‰è¡¨çš„ RLS ç­–ç•¥æ”¹ä¸º `using (true)` å…è®¸æ‰€æœ‰æ“ä½œ
2. æ·»åŠ ç¼ºå¤±çš„æ•°æ®åº“å­—æ®µ
3. åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹å¹¶æ¸…é™¤æ—§çš„ localStorage æ•°æ®

## ğŸ“‹ å®Œæ•´æ›´æ–°æ—¥å¿—

- ä¿®å¤ RLS ç­–ç•¥é…ç½®é”™è¯¯
- æ·»åŠ  transactions.product_name åˆ—
- è‡ªåŠ¨æ¸…é™¤æ—§çš„æœ¬åœ°ç¼“å­˜æ•°æ®
- æ›´æ–°ç‰ˆæœ¬å·è‡³ 1.0.2
- åŒ…å«å®Œæ•´çš„ SQL ä¿®å¤è„šæœ¬

---

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
```

### æ­¥éª¤ 2ï¼šä¸Šä¼ æ–‡ä»¶

æ‹–æ‹½ä»¥ä¸‹æ–‡ä»¶åˆ° "Attach binaries" åŒºåŸŸï¼š

**å¿…éœ€æ–‡ä»¶**ï¼š
- `release/ä»“å‚¨è®°è´¦ç³»ç»Ÿ Setup 1.0.2.exe`
- `release/ä»“å‚¨è®°è´¦ç³»ç»Ÿ Setup 1.0.2.exe.blockmap`
- `release/latest.yml`

**SQL è„šæœ¬**ï¼ˆé‡è¦ï¼ï¼‰ï¼š
- `simple-fix.sql`
- `add-product-name-column.sql`
- `fix-all-tables.sql`

### æ­¥éª¤ 3ï¼šå‘å¸ƒ

1. å‹¾é€‰ "Set as the latest release"
2. ç‚¹å‡» **"Publish release"**
3. ç­‰å¾…æ–‡ä»¶ä¸Šä¼ å®Œæˆ

---

## æ–¹æ³• 3ï¼šä½¿ç”¨å‘½ä»¤è¡Œï¼ˆå¿«é€Ÿï¼‰

```bash
# å®‰è£… GitHub CLIï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
winget install --id GitHub.cli

# ç™»å½•
gh auth login

# åˆ›å»º Release
gh release create v1.0.2 ^
    --title "v1.0.2 - ä¿®å¤ Supabase åŒæ­¥é—®é¢˜" ^
    --notes-file release_notes.txt ^
    "release\ä»“å‚¨è®°è´¦ç³»ç»Ÿ Setup 1.0.2.exe" ^
    "release\ä»“å‚¨è®°è´¦ç³»ç»Ÿ Setup 1.0.2.exe.blockmap" ^
    "release\latest.yml" ^
    "simple-fix.sql" ^
    "add-product-name-column.sql" ^
    "fix-all-tables.sql"
```

---

## éªŒè¯å‘å¸ƒæˆåŠŸ

1. **è®¿é—® Releases é¡µé¢**
   https://github.com/yliangchen686-sys/warehouse-accounting/releases

2. **æ£€æŸ¥é¡¹ç›®**ï¼š
   - âœ… ç‰ˆæœ¬å·æ­£ç¡® (v1.0.2)
   - âœ… æ‰€æœ‰æ–‡ä»¶å·²ä¸Šä¼ ï¼ˆ6 ä¸ªæ–‡ä»¶ï¼‰
   - âœ… Release è¯´æ˜å®Œæ•´
   - âœ… æ ‡è®°ä¸º "Latest"

3. **æµ‹è¯•ä¸‹è½½**ï¼š
   - ç‚¹å‡» `ä»“å‚¨è®°è´¦ç³»ç»Ÿ Setup 1.0.2.exe` ä¸‹è½½é“¾æ¥
   - ç¡®è®¤å¯ä»¥æ­£å¸¸ä¸‹è½½
   - æ–‡ä»¶å¤§å°æ­£ç¡®ï¼ˆçº¦ 150-200 MBï¼‰

---

## å‘å¸ƒåçš„å·¥ä½œ

### 1. é€šçŸ¥ç”¨æˆ·æ›´æ–°

å‘é€ç»™ä½¿ç”¨è¯¥ç³»ç»Ÿçš„äººï¼š

```
ğŸ“¢ ä»“å‚¨è®°è´¦ç³»ç»Ÿ v1.0.2 å‘å¸ƒ

é‡è¦æ›´æ–°ï¼šä¿®å¤ Supabase åŒæ­¥é—®é¢˜

ä¸‹è½½åœ°å€ï¼š
https://github.com/yliangchen686-sys/warehouse-accounting/releases/tag/v1.0.2

âš ï¸ å®‰è£…å‰å¿…é¡»å…ˆæ‰§è¡Œ SQL è„šæœ¬ï¼
è¯·æŒ‰ç…§ Release è¯´æ˜æ“ä½œã€‚
```

### 2. æ›´æ–°æ–‡æ¡£

å¦‚æœæœ‰ README.mdï¼Œæ›´æ–°ç‰ˆæœ¬å·å’Œä¸‹è½½é“¾æ¥ã€‚

### 3. ç›‘æ§åé¦ˆ

- æ£€æŸ¥ GitHub Issues
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- ä¿®å¤å‘ç°çš„é—®é¢˜

---

## å¸¸è§é—®é¢˜

### Q: gh å‘½ä»¤æ‰¾ä¸åˆ°ï¼Ÿ
A:
1. è®¿é—® https://cli.github.com/ ä¸‹è½½å®‰è£…
2. æˆ–è¿è¡Œï¼š`winget install --id GitHub.cli`
3. é‡å¯å‘½ä»¤æç¤ºç¬¦

### Q: åˆ›å»º Release å¤±è´¥ï¼Ÿ
A:
1. ç¡®è®¤å·²ç™»å½•ï¼š`gh auth status`
2. ç¡®è®¤æ–‡ä»¶å­˜åœ¨ï¼šæ£€æŸ¥ `release` æ–‡ä»¶å¤¹
3. ç¡®è®¤ç‰ˆæœ¬å·å”¯ä¸€ï¼šv1.0.2 æ˜¯å¦å·²å­˜åœ¨

### Q: æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼Ÿ
A:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡ 2GB
3. GitHub æœåŠ¡æ˜¯å¦æ­£å¸¸

### Q: å¦‚ä½•åˆ é™¤é”™è¯¯çš„ Releaseï¼Ÿ
A:
```bash
gh release delete v1.0.2
```
æˆ–åœ¨ GitHub ç½‘é¡µä¸Šåˆ é™¤ã€‚

### Q: å¦‚ä½•ç¼–è¾‘å·²å‘å¸ƒçš„ Releaseï¼Ÿ
A:
```bash
gh release edit v1.0.2
```
æˆ–åœ¨ GitHub ç½‘é¡µä¸Šç‚¹å‡» "Edit release"ã€‚

---

## ä¸‹æ¬¡å‘å¸ƒæµç¨‹

1. **ä¿®æ”¹ä»£ç **
2. **æ›´æ–°ç‰ˆæœ¬å·**ï¼ˆpackage.jsonï¼‰
3. **æ„å»ºåº”ç”¨**
   ```bash
   npm run build
   npm run electron-pack
   ```
4. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "ç‰ˆæœ¬æ›´æ–°"
   git push
   ```
5. **å‘å¸ƒ Release**
   ```bash
   publish-release.bat
   ```
   æˆ–æ‰‹åŠ¨åˆ›å»º

---

## è‡ªåŠ¨æ›´æ–°åŠŸèƒ½è¯´æ˜

ç”¨æˆ·å®‰è£… v1.0.2 åï¼š
1. åº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥æ›´æ–°
2. å¦‚æœæœ‰æ–°ç‰ˆæœ¬ï¼Œä¼šæç¤ºä¸‹è½½
3. ä¸‹è½½å®Œæˆåæç¤ºå®‰è£…
4. å®‰è£…æ—¶ä¼šè‡ªåŠ¨è¦†ç›–æ—§ç‰ˆæœ¬

è¿™ä¾èµ–äºï¼š
- `latest.yml` æ–‡ä»¶ï¼ˆåŒ…å«ç‰ˆæœ¬ä¿¡æ¯ï¼‰
- GitHub Releases çš„è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
- electron-updater æ¨¡å—

---

## è”ç³»æ”¯æŒ

å¦‚æœå‘å¸ƒè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. æŸ¥çœ‹ GitHub CLI æ–‡æ¡£ï¼šhttps://cli.github.com/manual/
3. æŸ¥çœ‹ electron-builder æ–‡æ¡£ï¼šhttps://www.electron.build/
